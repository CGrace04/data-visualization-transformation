{
  "hash": "5e247a78c0e95087df821e3c9cfb9890",
  "result": {
    "engine": "knitr",
    "markdown": "---\ntitle: \"Building a plot<br>step-by-step with ggplot2\"\nformat: revealjs\n---\n\n\n\n\n\n# ggplot2\n\n## ggplot2 $\\in$ tidyverse\n\n::: columns\n::: {.column width=\"30%\"}\n![](images/ggplot2-part-of-tidyverse.png){fig-align=\"left\" width=\"400\"}\n:::\n\n::: {.column width=\"40%\"}\n-   **ggplot2** is tidyverse's data visualization package\n-   `gg` in \"ggplot2\" stands for Grammar of Graphics\n-   Inspired by the book **Grammar of Graphics** by Leland Wilkinson\n:::\n:::\n\n## Grammar of Graphics\n\nA grammar of graphics is a tool that enables us to concisely describe the components of a graphic.\n\n![](images/grammar-of-graphics.png){fig-align=\"left\" width=\"999\"}\n\n::: aside\n[BloggoType](http://bloggotype.blogspot.com/2016/08/holiday-notes2-grammar-of-graphics.html)\n:::\n\n## Mass vs. height\n\n\n\n::: {.cell}\n\n```{.r .cell-code}\nggplot(starwars, aes(x = height, y = mass)) +\n  geom_point() +\n  labs(\n    title = \"Mass vs. height of Starwars characters\",\n    x = \"Height (cm)\", \n    y = \"Weight (kg)\"\n  )\n```\n\n::: {.cell-output .cell-output-stderr}\n\n```\nWarning: Removed 28 rows containing missing values\n(`geom_point()`).\n```\n\n\n:::\n\n::: {.cell-output-display}\n![](2-1-2-step-by-step-ggplot2_files/figure-revealjs/mass-height-1.png){width=576}\n:::\n:::\n\n\n\n## Parsing the code\n\n::: task\n-   What are the functions doing the plotting?\n-   What is the dataset being plotted?\n-   Which variables map to which features (aesthetics) of the plot?\n-   What does the warning mean?<sup>+</sup>\n:::\n\n\n\n::: {.cell}\n\n```{.r .cell-code}\nggplot(starwars, aes(x = height, y = mass)) +\n  geom_point() +\n  labs(\n    title = \"Mass vs. height of Starwars characters\",\n    x = \"Height (cm)\", \n    y = \"Weight (kg)\"\n  )\n```\n\n::: {.cell-output .cell-output-stderr}\n\n```\nWarning: Removed 28 rows containing missing values\n(`geom_point()`).\n```\n\n\n:::\n:::\n\n\n\n::: aside\n<sup>+</sup>Suppressing warning to subsequent slides to save space\n:::\n\n## Hello ggplot2!\n\n-   `ggplot()` is the main function in ggplot2\n\n. . .\n\n-   Plots are constructed in layers\n\n. . .\n\n-   Structure of the code for plots can be summarized as\n\n``` r\nggplot(data = [dataset], \n       mapping = aes(x = [x-variable], y = [y-variable])) +\n   geom_xxx() +\n   other options\n```\n\n. . .\n\n-   The ggplot2 package comes with the tidyverse\n\n\n\n::: {.cell}\n\n```{.r .cell-code}\nlibrary(tidyverse)\n```\n:::\n\n\n\n. . .\n\n-   For help with ggplot2, see [ggplot2.tidyverse.org](http://ggplot2.tidyverse.org/)\n\n\n# ggplot2 ‚ù§Ô∏è üêß {.section-break}\n\n## Data: Palmer Penguins\n\nMeasurements for penguin species, island in Palmer Archipelago, size (flipper length, body mass, bill dimensions), and sex.\n\n![](images/penguins.png){fig-align=\"center\" width=\"477\"}\n\n## Data\n\n\n\n::: {.cell}\n\n```{.r .cell-code}\nlibrary(palmerpenguins)\nglimpse(penguins)\n```\n\n::: {.cell-output .cell-output-stdout}\n\n```\nRows: 344\nColumns: 8\n$ species           <fct> Adelie, Adelie, Adelie, Adelie, ‚Ä¶\n$ island            <fct> Torgersen, Torgersen, Torgersen,‚Ä¶\n$ bill_length_mm    <dbl> 39.1, 39.5, 40.3, NA, 36.7, 39.3‚Ä¶\n$ bill_depth_mm     <dbl> 18.7, 17.4, 18.0, NA, 19.3, 20.6‚Ä¶\n$ flipper_length_mm <int> 181, 186, 195, NA, 193, 190, 181‚Ä¶\n$ body_mass_g       <int> 3750, 3800, 3250, NA, 3450, 3650‚Ä¶\n$ sex               <fct> male, female, female, NA, female‚Ä¶\n$ year              <int> 2007, 2007, 2007, 2007, 2007, 20‚Ä¶\n```\n\n\n:::\n:::\n\n\n\n## Plot\n\n\n\n::: {.cell}\n::: {.cell-output-display}\n![](2-1-2-step-by-step-ggplot2_files/figure-revealjs/unnamed-chunk-6-1.png){width=960}\n:::\n:::\n\n\n\n## Code\n\n\n\n::: {.cell}\n\n```{.r .cell-code}\nggplot(\n  data = penguins,\n  mapping = aes(\n    x = bill_depth_mm, y = bill_length_mm,\n    color = species\n  )\n) +\n  geom_point() +\n  labs(\n    title = \"Bill depth and length\",\n    subtitle = \"Dimensions for Adelie, Chinstrap, and Gentoo Penguins\",\n    x = \"Bill depth (mm)\", \n    y = \"Bill length (mm)\",\n    color = \"Species\"\n  )\n```\n\n::: {.cell-output .cell-output-stderr}\n\n```\nWarning: Removed 2 rows containing missing values\n(`geom_point()`).\n```\n\n\n:::\n:::\n\n\n\n# Coding out loud {.section-break}\n\n## Step 1\n\n**Start with the `penguins` data frame**\n\n\n\n::: {.cell output-location='column'}\n\n```{.r .cell-code  code-line-numbers=\"|1,3|2\"}\nggplot(\n  data = penguins\n  )\n```\n\n::: {.cell-output-display}\n![](2-1-2-step-by-step-ggplot2_files/figure-revealjs/unnamed-chunk-8-1.png){width=576}\n:::\n:::\n\n\n\n## Step 2\n\nStart with the `penguins` data frame, **map bill depth to the x-axis**\n\n\n\n::: {.cell output-location='column'}\n\n```{.r .cell-code  code-line-numbers=\"3\"}\nggplot(\n  data = penguins,\n  mapping = aes(x = bill_depth_mm)\n  )\n```\n\n::: {.cell-output-display}\n![](2-1-2-step-by-step-ggplot2_files/figure-revealjs/unnamed-chunk-9-1.png){width=576}\n:::\n:::\n\n\n\n## Step 3\n\nStart with the `penguins` data frame, map bill depth to the x-axis **and map bill length to the y-axis.**\n\n\n\n::: {.cell output-location='column'}\n\n```{.r .cell-code  code-line-numbers=\"4-5\"}\nggplot(\n  data = penguins,\n  mapping = aes(\n    x = bill_depth_mm,\n    y = bill_length_mm\n    )\n  )\n```\n\n::: {.cell-output-display}\n![](2-1-2-step-by-step-ggplot2_files/figure-revealjs/unnamed-chunk-10-1.png){width=576}\n:::\n:::\n\n\n\n## Step 4\n\nStart with the `penguins` data frame, map bill depth to the x-axis and map bill length to the y-axis.\n**Represent each observation with a point**\n\n\n\n::: {.cell output-location='column'}\n\n```{.r .cell-code  code-line-numbers=\"8\"}\nggplot(\n  data = penguins,\n  mapping = aes(\n    x = bill_depth_mm,\n    y = bill_length_mm\n    )\n  ) +\n  geom_point()\n```\n\n::: {.cell-output-display}\n![](2-1-2-step-by-step-ggplot2_files/figure-revealjs/unnamed-chunk-11-1.png){width=576}\n:::\n:::\n\n\n\n## Step 5\n\nStart with the `penguins` data frame, map bill depth to the x-axis and map bill length to the y-axis.\nRepresent each observation with a point **and map species to the color of each point.**\n\n\n\n::: {.cell output-location='column'}\n\n```{.r .cell-code  code-line-numbers=\"6\"}\nggplot(\n  data = penguins,\n  mapping = aes(\n    x = bill_depth_mm,\n    y = bill_length_mm,\n    color = species\n    )\n  ) +\n  geom_point()\n```\n\n::: {.cell-output-display}\n![](2-1-2-step-by-step-ggplot2_files/figure-revealjs/unnamed-chunk-12-1.png){width=576}\n:::\n:::\n\n\n\n## Step 6\n\nStart with the `penguins` data frame, map bill depth to the x-axis and map bill length to the y-axis.\nRepresent each observation with a point and map species to the color of each point.\n**Title the plot \"Bill depth and length\"**\n\n\n\n::: {.cell output-location='column'}\n\n```{.r .cell-code  code-line-numbers=\"|6,8|7\"}\nggplot(\n  data = penguins,\n  mapping = aes(x = bill_depth_mm, y = bill_length_mm, color = species)\n  ) +\n  geom_point() +\n  labs(\n    title = \"Bill depth and length\"\n  )\n```\n\n::: {.cell-output-display}\n![](2-1-2-step-by-step-ggplot2_files/figure-revealjs/unnamed-chunk-13-1.png){width=576}\n:::\n:::\n\n\n\n## Step 7\n\nStart with the `penguins` data frame, map bill depth to the x-axis and map bill length to the y-axis.\nRepresent each observation with a point and map species to the color of each point.\nTitle the plot \"Bill depth and length\", **add the subtitle \"Dimensions for Adelie, Chinstrap, and Gentoo Penguins\"**\n\n\n\n::: {.cell output-location='column'}\n\n```{.r .cell-code  code-line-numbers=\"8\"}\nggplot(\n  data = penguins,\n  mapping = aes(x = bill_depth_mm, y = bill_length_mm, color = species)\n  ) +\n  geom_point() +\n  labs(\n    title = \"Bill depth and length\",\n    subtitle = \"Dimensions for Adelie, Chinstrap, and Gentoo Penguins\"\n  )\n```\n\n::: {.cell-output-display}\n![](2-1-2-step-by-step-ggplot2_files/figure-revealjs/unnamed-chunk-14-1.png){width=672}\n:::\n:::\n\n\n\n## Step 8\n\nStart with the `penguins` data frame, map bill depth to the x-axis and map bill length to the y-axis.\nRepresent each observation with a point and map species to the color of each point.\nTitle the plot \"Bill depth and length\", add the subtitle \"Dimensions for Adelie, Chinstrap, and Gentoo Penguins\", **label the x and y axes as \"Bill depth (mm)\" and \"Bill length (mm)\", respectively**\n\n\n\n::: {.cell output-location='column'}\n\n```{.r .cell-code  code-line-numbers=\"9-10\"}\nggplot(\n  data = penguins,\n  mapping = aes(x = bill_depth_mm, y = bill_length_mm, color = species)\n  ) +\n  geom_point() +\n  labs(\n    title = \"Bill depth and length\",\n    subtitle = \"Dimensions for Adelie, Chinstrap, and Gentoo Penguins\",\n    x = \"Bill depth (mm)\", \n    y = \"Bill length (mm)\"\n  )\n```\n\n::: {.cell-output-display}\n![](2-1-2-step-by-step-ggplot2_files/figure-revealjs/unnamed-chunk-15-1.png){width=672}\n:::\n:::\n\n\n\n## Step 9\n\nStart with the `penguins` data frame, map bill depth to the x-axis and map bill length to the y-axis.\nRepresent each observation with a point and map species to the color of each point.\nTitle the plot \"Bill depth and length\", add the subtitle \"Dimensions for Adelie, Chinstrap, and Gentoo Penguins\", label the x and y axes as \"Bill depth (mm)\" and \"Bill length (mm)\", respectively, **label the legend \"Species\"**\n\n\n\n::: {.cell output-location='column'}\n\n```{.r .cell-code  code-line-numbers=\"10\"}\nggplot(\n  data = penguins,\n  mapping = aes(x = bill_depth_mm, y = bill_length_mm, color = species)\n  ) +\n  geom_point() +\n  labs(\n    title = \"Bill depth and length\",\n    subtitle = \"Dimensions for Adelie, Chinstrap, and Gentoo Penguins\",\n    x = \"Bill depth (mm)\", y = \"Bill length (mm)\",\n    color = \"Species\"\n  )\n```\n\n::: {.cell-output-display}\n![](2-1-2-step-by-step-ggplot2_files/figure-revealjs/unnamed-chunk-16-1.png){width=672}\n:::\n:::\n\n\n\n## Step 10 {.smaller}\n\nStart with the `penguins` data frame, map bill depth to the x-axis and map bill length to the y-axis.\nRepresent each observation with a point and map species to the color of each point.\nTitle the plot \"Bill depth and length\", add the subtitle \"Dimensions for Adelie, Chinstrap, and Gentoo Penguins\", label the x and y axes as \"Bill depth (mm)\" and \"Bill length (mm)\", respectively, label the legend \"Species\", **and add a caption for the data source.**\n\n\n\n::: {.cell output-location='column'}\n\n```{.r .cell-code  code-line-numbers=\"11\"}\nggplot(\n  data = penguins,\n  mapping = aes(x = bill_depth_mm, y = bill_length_mm, color = species)\n  ) +\n  geom_point() +\n  labs(\n    title = \"Bill depth and length\",\n    subtitle = \"Dimensions for Adelie, Chinstrap, and Gentoo Penguins\",\n    x = \"Bill depth (mm)\", y = \"Bill length (mm)\",\n    color = \"Species\",\n    caption = \"Source: Palmer Station LTER / palmerpenguins package\"\n  )\n```\n\n::: {.cell-output-display}\n![](2-1-2-step-by-step-ggplot2_files/figure-revealjs/unnamed-chunk-17-1.png){width=672}\n:::\n:::\n\n\n\n## Step 11 {.smaller}\n\nStart with the `penguins` data frame, map bill depth to the x-axis and map bill length to the y-axis.\nRepresent each observation with a point and map species to the color of each point.\nTitle the plot \"Bill depth and length\", add the subtitle \"Dimensions for Adelie, Chinstrap, and Gentoo Penguins\", label the x and y axes as \"Bill depth (mm)\" and \"Bill length (mm)\", respectively, label the legend \"Species\", and add a caption for the data source.\n**Finally, use a discrete color scale that is designed to be perceived by viewers with common forms of color blindness.**\n\n\n\n::: {.cell output-location='column'}\n\n```{.r .cell-code  code-line-numbers=\"13\"}\nggplot(\n  data = penguins,\n  mapping = aes(x = bill_depth_mm, y = bill_length_mm, color = species)\n  ) +\n  geom_point() +\n  labs(\n    title = \"Bill depth and length\",\n    subtitle = \"Dimensions for Adelie, Chinstrap, and Gentoo Penguins\",\n    x = \"Bill depth (mm)\", y = \"Bill length (mm)\",\n    color = \"Species\",\n    caption = \"Source: Palmer Station LTER / palmerpenguins package\"\n  ) +\n  scale_color_viridis_d()\n```\n\n::: {.cell-output-display}\n![](2-1-2-step-by-step-ggplot2_files/figure-revealjs/step-11-1.png){width=672}\n:::\n:::\n\n\n\n## Plot\n\n\n\n::: {.cell}\n::: {.cell-output .cell-output-stderr}\n\n```\nWarning: Removed 2 rows containing missing values\n(`geom_point()`).\n```\n\n\n:::\n\n::: {.cell-output-display}\n![](2-1-2-step-by-step-ggplot2_files/figure-revealjs/unnamed-chunk-19-1.png){width=960}\n:::\n:::\n\n\n\n## Code\n\n\n\n::: {.cell}\n\n```{.r .cell-code}\nggplot(\n  data = penguins,\n  mapping = aes(x = bill_depth_mm, y = bill_length_mm, color = species)\n  ) +\n  geom_point() +\n  labs(\n    title = \"Bill depth and length\",\n    subtitle = \"Dimensions for Adelie, Chinstrap, and Gentoo Penguins\",\n    x = \"Bill depth (mm)\", y = \"Bill length (mm)\",\n    color = \"Species\",\n    caption = \"Source: Palmer Station LTER / palmerpenguins package\"\n  ) +\n  scale_color_viridis_d()\n```\n:::\n\n\n\n## Narrative\n\nStart with the `penguins` data frame, map bill depth to the x-axis and map bill length to the y-axis.\n\nRepresent each observation with a point and map species to the color of each point.\n\nTitle the plot \"Bill depth and length\", add the subtitle \"Dimensions for Adelie, Chinstrap, and Gentoo Penguins\", label the x and y axes as \"Bill depth (mm)\" and \"Bill length (mm)\", respectively, label the legend \"Species\", and add a caption for the data source.\n\nFinally, use a discrete color scale that is designed to be perceived by viewers with common forms of color blindness.\n\n## Argument names\n\nYou can omit the names of first two arguments when building plots with `ggplot()`.\n\n::: columns\n::: {.column width=\"50%\"}\n\n\n::: {.cell}\n\n```{.r .cell-code  code-line-numbers=\"|2|3-7\"}\nggplot(\n  data = penguins,\n  mapping = aes(\n    x = bill_depth_mm,\n    y = bill_length_mm\n    )\n  ) +\n  geom_point()\n```\n:::\n\n\n:::\n\n::: {.column width=\"50%\"}\n\n\n::: {.cell}\n\n```{.r .cell-code  code-line-numbers=\"|2|3-7\"}\nggplot(\n  penguins,\n  aes(\n    x = bill_depth_mm,\n    y = bill_length_mm\n    )\n  ) +\n  geom_point()\n```\n:::\n\n\n:::\n:::\n\n## Summary\n\nStructure of the code for plots can be summarized as\n\n``` r\nggplot(data = [dataset], \n       mapping = aes(x = [x-variable], \n                     y = [y-variable])) +\n   geom_xxx() +\n   other options\n```\n\n",
    "supporting": [
      "2-1-2-step-by-step-ggplot2_files"
    ],
    "filters": [
      "rmarkdown/pagebreak.lua"
    ],
    "includes": {
      "include-after-body": [
        "\n<script>\n  // htmlwidgets need to know to resize themselves when slides are shown/hidden.\n  // Fire the \"slideenter\" event (handled by htmlwidgets.js) when the current\n  // slide changes (different for each slide format).\n  (function () {\n    // dispatch for htmlwidgets\n    function fireSlideEnter() {\n      const event = window.document.createEvent(\"Event\");\n      event.initEvent(\"slideenter\", true, true);\n      window.document.dispatchEvent(event);\n    }\n\n    function fireSlideChanged(previousSlide, currentSlide) {\n      fireSlideEnter();\n\n      // dispatch for shiny\n      if (window.jQuery) {\n        if (previousSlide) {\n          window.jQuery(previousSlide).trigger(\"hidden\");\n        }\n        if (currentSlide) {\n          window.jQuery(currentSlide).trigger(\"shown\");\n        }\n      }\n    }\n\n    // hookup for slidy\n    if (window.w3c_slidy) {\n      window.w3c_slidy.add_observer(function (slide_num) {\n        // slide_num starts at position 1\n        fireSlideChanged(null, w3c_slidy.slides[slide_num - 1]);\n      });\n    }\n\n  })();\n</script>\n\n"
      ]
    },
    "engineDependencies": {},
    "preserve": {},
    "postProcess": true
  }
}